services:
  shai:
    build:
      context: .
      dockerfile: Dockerfile

    # Aucun provider impos√© : choisissez via `shai auth`
    volumes:
      - shai_config:/home/shai/.config/shai
      - type: bind
        source: ../.env.example
        target: /home/shai/.env
        read_only: true

    read_only: true
    tmpfs:
      - /tmp
      - /home/shai/.cache
    cap_drop: [ "ALL" ]
    security_opt:
      - no-new-privileges:true

volumes:
  shai_config:
